<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oficina da Lua | Ateliê Autoral</title>
    
    <!-- Tailwind CSS para Estilização -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React e Babel para rodar o código no navegador -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;700&display=swap');
        
        body {
            font-family: 'Playfair Display', serif;
            background-color: #0f110e;
            color: #e2e2d5;
            margin: 0;
            overflow-x: hidden;
        }

        .font-sans { font-family: 'Inter', sans-serif; }

        @keyframes pulse-soft {
            0%, 100% { opacity: 0.4; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.1); }
        }

        .animate-pulse-soft {
            animation: pulse-soft 3s infinite ease-in-out;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #0f110e; }
        ::-webkit-scrollbar-thumb { background: #d4af37; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // --- COMPONENTES DE ÍCONES (SVG Direto para garantir funcionamento) ---
        const IconStar = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" className={className}>
                <path d="M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z" />
            </svg>
        );

        const IconMoon = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
        );

        const IconCat = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="1.5" className={className}>
                <path d="M12 5c.67 0 1.35.09 2 .26V5a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.76c.65.17 1.33.24 2 .24 0 1.66-1.34 3-3 3h-6C8.34 9 7 7.66 7 6c.67 0 1.35-.07 2-.24V5a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.26zM2 21c0-4 3.33-7 7-7h6c3.67 0 7 3 7 7v1H2v-1z"></path>
            </svg>
        );

        // --- ELEMENTOS DE ATMOSFERA ---

        const FundoMistico = () => {
            const stars = useMemo(() => [...Array(25)].map((_, i) => ({
                id: i,
                top: `${Math.random() * 100}%`,
                left: `${Math.random() * 100}%`,
                size: Math.random() * 20 + 10,
                blur: Math.random() * 3,
                delay: Math.random() * 5,
                duration: 3 + Math.random() * 4
            })), []);

            return (
                <div className="fixed inset-0 pointer-events-none overflow-hidden z-0 bg-[#0f110e]">
                    <div className="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-emerald-900/10 blur-[120px] rounded-full" />
                    <div className="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-blue-900/10 blur-[120px] rounded-full" />
                    
                    {stars.map(s => (
                        <div key={s.id} className="absolute text-yellow-300 drop-shadow-[0_0_8px_rgba(253,224,71,0.8)] animate-pulse-soft"
                             style={{
                                top: s.top,
                                left: s.left,
                                filter: `blur(${s.blur}px)`,
                                animationDelay: `${s.delay}s`,
                                animationDuration: `${s.duration}s`
                             }}>
                            <IconStar size={s.size} />
                        </div>
                    ))}
                    <div className="absolute inset-0 opacity-[0.03] mix-blend-overlay" style={{backgroundImage: `url('https://www.transparenttextures.com/patterns/handmade-paper.png')`}} />
                </div>
            );
        };

        const LogoOficina = () => (
            <div className="relative w-16 h-16 flex items-center justify-center group">
                <IconMoon className="absolute w-12 h-12 text-[#d4af37] opacity-80 -rotate-12 group-hover:rotate-0 transition-transform duration-700" />
                <IconCat className="absolute w-7 h-7 text-stone-900 fill-stone-900 bottom-2 left-3" />
                <IconStar className="absolute w-4 h-4 text-yellow-200 fill-yellow-200 top-1 right-2 animate-bounce" />
            </div>
        );

        // --- APP PRINCIPAL ---

        function App() {
            const [isCartOpen, setIsCartOpen] = useState(false);
            const [isEditMode, setIsEditMode] = useState(false);
            const [cart, setCart] = useState([]);
            
            const [products, setProducts] = useState([
                { id: 1, name: 'Cadernos Artesanais (A5 e A6)', price: 45.00, description: 'Costurados à mão, papel pólen 90g. Revestimento em tecido + papel kraft. Aproximadamente 3h30 de produção dedicada.', image: 'https://images.unsplash.com/photo-1544816153-12ad5d714b21?auto=format&fit=crop&w=800&q=80', specs: 'Papel Pólen 90g | Costura Manual' },
                { id: 2, name: 'Brincos Artesanais', price: 15.00, description: 'Peças autorais com estética artística e identidade própria. Leves, confortáveis e design exclusivo.', image: 'https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?auto=format&fit=crop&w=800&q=80', specs: 'Design Exclusivo | Produção Manual' },
                { id: 3, name: 'Incensário Artesanal', price: 40.00, description: 'Peça decorativa funcional, com estética mística e natural. Resistente ao calor e modelado à mão.', image: 'https://images.unsplash.com/photo-1602928321679-560bb453f190?auto=format&fit=crop&w=800&q=80', specs: 'Cerâmica | Resistente | Autoral' },
                { id: 4, name: 'Caixinha de Joias', price: 60.00, description: 'Caixa decorativa artesanal para guardar acessórios. Estrutura firme e acabamento detalhado em tecido.', image: 'https://images.unsplash.com/photo-1582142306909-195724d339c4?auto=format&fit=crop&w=800&q=80', specs: 'Estrutura Firme | Revestimento Tecido' }
            ]);

            const handleEdit = (id, field, value) => {
                setProducts(prev => prev.map(p => p.id === id ? { ...p, [field]: value } : p));
            };

            const addToCart = (p) => {
                setCart(prev => {
                    const exists = prev.find(item => item.id === p.id);
                    if (exists) return prev.map(item => item.id === p.id ? { ...item, qty: item.qty + 1 } : item);
                    return [...prev, { ...p, qty: 1 }];
                });
                setIsCartOpen(true);
            };

            const cartTotal = cart.reduce((acc, i) => acc + (i.price * i.qty), 0);

            const checkout = () => {
                const msg = cart.map(i => `${i.qty}x ${i.name}`).join('%0A');
                window.open(`https://wa.me/5511999999999?text=Oi Oficina da Lua! ✨%0AGostaria dessas peças:%0A${msg}%0ATotal: R$ ${cartTotal.toFixed(2)}`);
            };

            return (
                <div className="relative min-h-screen">
                    <FundoMistico />

                    {/* Botão de Edição */}
                    <button onClick={() => setIsEditMode(!isEditMode)} 
                            className="fixed bottom-8 left-8 z-[100] bg-[#d4af37] text-stone-950 px-6 py-3 rounded-full shadow-2xl font-sans font-bold text-xs uppercase tracking-widest flex items-center gap-2 hover:scale-105 transition-all">
                        {isEditMode ? '✓ Salvar Alterações' : '✎ Modo Ateliê'}
                    </button>

                    {/* Header */}
                    <header className="relative z-50 py-8 px-6 md:px-12">
                        <div className="max-w-7xl mx-auto flex justify-between items-center border-b border-stone-800/50 pb-8">
                            <div className="flex items-center gap-4">
                                <LogoOficina />
                                <div>
                                    <h1 className="text-2xl md:text-3xl font-bold tracking-tighter text-[#d4af37]">OFICINA DA LUA</h1>
                                    <p className="font-sans text-[9px] uppercase tracking-[0.4em] text-stone-500 mt-1">Arte que se segura nas mãos</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-8">
                                <button onClick={() => setIsCartOpen(true)} className="relative hover:text-[#d4af37] transition-colors">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path><path d="M3 6h18"></path><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
                                    {cart.length > 0 && <span className="absolute -top-1 -right-1 w-4 h-4 bg-[#d4af37] text-stone-950 rounded-full text-[9px] flex items-center justify-center font-bold">{cart.length}</span>}
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Hero */}
                    <section className="relative z-10 max-w-7xl mx-auto px-6 py-20 grid md:grid-cols-12 gap-12 items-center">
                        <div className="md:col-span-7 space-y-8 order-2 md:order-1">
                            <h2 className="text-5xl md:text-8xl font-bold italic leading-none tracking-tighter">
                                A presença do <br/>
                                <span className="text-[#d4af37] not-italic">feito à mão.</span>
                            </h2>
                            <p className="text-lg text-stone-400 max-w-xl leading-relaxed font-light">
                                Não vendemos apenas objetos. Vendemos tempo, intenção e a textura da alma aplicada ao cotidiano. Cada peça é uma conversa única.
                            </p>
                        </div>
                        <div className="md:col-span-5 order-1 md:order-2">
                            <img src="https://images.unsplash.com/photo-1513689125086-6c432170e843?auto=format&fit=crop&w=800&q=80" 
                                 className="w-full rounded-[3rem] shadow-2xl grayscale hover:grayscale-0 transition-all duration-1000 object-cover aspect-[4/5] border border-stone-800" />
                        </div>
                    </section>

                    {/* Produtos */}
                    <section id="produtos" className="relative z-10 max-w-7xl mx-auto px-6 py-32">
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-x-20 gap-y-32">
                            {products.map((p, idx) => (
                                <div key={p.id} className={`flex flex-col space-y-6 ${idx % 2 !== 0 ? 'md:mt-24' : ''}`}>
                                    <div className="relative group overflow-hidden bg-stone-900 rounded-2xl shadow-2xl">
                                        <img src={p.image} className="w-full aspect-[4/5] object-cover opacity-80 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700" />
                                        <button onClick={() => addToCart(p)} className="absolute bottom-6 right-6 bg-[#d4af37] text-stone-950 p-4 rounded-full shadow-xl hover:scale-110 transition-transform">
                                            <span className="font-bold">+</span>
                                        </button>
                                        {isEditMode && (
                                            <input className="absolute top-4 left-4 right-4 bg-stone-950/80 p-2 text-[10px]" value={p.image} onChange={e => handleEdit(p.id, 'image', e.target.value)} />
                                        )}
                                    </div>
                                    <div className="space-y-4 px-2">
                                        <div className="flex justify-between items-start">
                                            <div className="flex-1">
                                                {isEditMode ? (
                                                    <input className="bg-transparent border-b border-[#d4af37] text-2xl font-bold w-full outline-none" value={p.name} onChange={e => handleEdit(p.id, 'name', e.target.value)} />
                                                ) : (
                                                    <h4 className="text-2xl font-bold">{p.name}</h4>
                                                )}
                                                <span className="text-[10px] uppercase tracking-widest text-[#d4af37] mt-1 block italic">{p.specs}</span>
                                            </div>
                                            <div className="text-right ml-4">
                                                <span className="text-xl font-bold text-[#d4af37]">R${p.price.toFixed(2)}</span>
                                            </div>
                                        </div>
                                        {isEditMode ? (
                                            <textarea className="bg-stone-900 border border-stone-800 text-stone-400 p-3 w-full h-24 text-sm" value={p.description} onChange={e => handleEdit(p.id, 'description', e.target.value)} />
                                        ) : (
                                            <p className="text-stone-400 font-light leading-relaxed">{p.description}</p>
                                        )}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </section>

                    {/* Carrinho Sidebar */}
                    {isCartOpen && (
                        <div className="fixed inset-0 z-[200] flex justify-end">
                            <div className="absolute inset-0 bg-stone-950/90 backdrop-blur-sm" onClick={() => setIsCartOpen(false)} />
                            <div className="relative w-full max-w-md bg-[#121412] h-full shadow-2xl border-l border-stone-800 p-8 flex flex-col">
                                <div className="flex justify-between items-center mb-10">
                                    <h3 className="text-2xl font-bold italic">Sacola Mística</h3>
                                    <button onClick={() => setIsCartOpen(false)} className="text-stone-500 hover:text-white">✕</button>
                                </div>
                                <div className="flex-1 overflow-y-auto space-y-6">
                                    {cart.map(item => (
                                        <div key={item.id} className="flex gap-4">
                                            <img src={item.image} className="w-16 h-20 object-cover rounded border border-stone-800" />
                                            <div className="flex-1">
                                                <h5 className="font-bold text-sm">{item.name}</h5>
                                                <p className="text-[#d4af37] text-xs mt-1">R$ {item.price.toFixed(2)}</p>
                                                <div className="flex items-center gap-4 mt-2">
                                                    <button onClick={() => setCart(prev => prev.map(i => i.id === item.id ? {...i, qty: Math.max(0, i.qty - 1)} : i).filter(i => i.qty > 0))} className="text-stone-600">－</button>
                                                    <span className="text-xs font-sans">{item.qty}</span>
                                                    <button onClick={() => setCart(prev => prev.map(i => i.id === item.id ? {...i, qty: i.qty + 1} : i))} className="text-stone-600">＋</button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                {cart.length > 0 && (
                                    <div className="pt-8 border-t border-stone-800">
                                        <div className="flex justify-between items-end mb-6">
                                            <span className="text-stone-500 text-xs uppercase tracking-widest">Total</span>
                                            <span className="text-3xl font-bold text-[#d4af37]">R$ {cartTotal.toFixed(2)}</span>
                                        </div>
                                        <button onClick={checkout} className="w-full bg-[#d4af37] text-stone-950 py-4 font-sans font-bold text-xs uppercase tracking-[0.3em] hover:bg-yellow-500 transition-all">
                                            Enviar Encomenda
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
